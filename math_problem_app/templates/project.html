{% load static %}
<div class="row" style="margin-top: 5px;">
    <div class="col-xs-3 lecture-left-menu" align="center" style="padding: 0;">
        <div class="lecture-left-box x-large-font create-test-left-box">
            {{ user.name }}의 문제집
        </div>
        <div class="list-group project-left-box-div">
            <div class="row" align="center">
                <p class="large-font bold">기하와 벡터</p>
                <p class="small-font">2등급 만들기</p>
            </div>
            <div class="row">
                <div class="col-xs-8">
                    <div id="doughnutChartContainer" style="padding: 5% 5% 5% 0; width: 100%; height: 200px;"></div>
                </div>
                <div class="col-xs-4" style="margin: 15% 0 0 -10%;">
                    <p class="large-font orange-color">0</p>
                    <p class="x-small-font gray-color">day streak</p>
                    <p class="large-font orange-color">6</p>
                    <p class="x-small-font gray-color">hours left</p>
                </div>
            </div>
            <div class="row project-left-box">
                <div id="chartContainer" style="padding: 10% 0% 10% 5%; height: 200px; width: 80%;"></div>
            </div>
        </div>
        <div class="list-group project-left-box-div">
            <div class="row" align="center">
                <p class="large-font bold">확률과 통계</p>
                <p class="small-font">4등급 만들기</p>
            </div>
            <div class="row">
                <div class="col-xs-8">
                    <div id="doughnutChartContainer2" style="padding: 5% 5% 5% 0; width: 100%; height: 200px;"></div>
                </div>
                <div class="col-xs-4" style="margin: 15% 0 0 -10%;">
                    <p class="large-font orange-color">0</p>
                    <p class="x-small-font gray-color">day streak</p>
                    <p class="large-font orange-color">6</p>
                    <p class="x-small-font gray-color">hours left</p>
                </div>
            </div>
            <div class="row project-left-box">
                <div id="chartContainer2" style="padding: 10% 0% 10% 5%; height: 200px; width: 80%;"></div>
            </div>
        </div>
    </div>
    <div class="col-xs-9">
        <div class="row">
            <div class="col-xs-12 project-title">
                <div class="recommend-title main-color x-large-font bold" align="center">
                    약점 강화 프로젝트
                </div>
            </div>
        </div>
        <div class="row" style="margin-top: 8%;">
            <div class="col-xs-3 col-xs-offset-1 project-unit-box-div">
                <div id="vector" class="project-unit-box">
                    <div class="project-text-box">
                        <p class="large-font bold">기하와 벡터</p>
                        <p class="medium-font">벡터가 부족한 {{ user.name }}에게 주는 선물</p>
                        <br>
                        <p class="medium-font">영상 8 문제 300</p>
                        <br>
                        <p class="medium-font">선 이수 과목</p>
                        <p class="medium-font bold">없음</p>
                    </div>
                </div>
            </div>
            <div class="col-xs-3 project-unit-box-div">
                <div id="tonggye" class="project-unit-box">
                    <div class="project-text-box">
                        <p class="large-font bold">확률과 통계</p>
                        <p class="medium-font">{{ user.name }}를 위한 통계 2등급 만들기</p>
                        <br>
                        <p class="medium-font">영상 8 문제 300</p>
                        <br>
                        <p class="medium-font">선 이수 과목</p>
                        <p class="medium-font bold">없음</p>
                    </div>
                </div>
            </div>
            <div class="col-xs-3 project-unit-box-div">
                <div id="mijuk" class="project-unit-box">
                    <div class="project-text-box">
                        <p class="large-font bold">미적분</p>
                        <p class="medium-font">정적분이 약한 {{ user.name }}을 위한 완전 맞춤 솔루션</p>
                        <br>
                        <p class="medium-font">영상 8 문제 300</p>
                        <br>
                        <p class="medium-font">선 이수 과목</p>
                        <p class="medium-font bold">없음</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    $('#vector').click(function () {
        $.ajax({
            url: "recommend/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })

    $.ajax({
        url: "getRateData/",
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            drawGraph(result, 'chartContainer')
        },
    });

    $.ajax({
        url: "getRateData/",
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            drawDoughnutGraph(result, 'doughnutChartContainer')
        },
    });

    $.ajax({
        url: "getRateData/",
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            drawGraph(result, 'chartContainer2')
        },
    });

    $.ajax({
        url: "getRateData/",
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            drawDoughnutGraph(result, 'doughnutChartContainer2')
        },
    });


    function drawGraph(data, id) {
		var chart = new CanvasJS.Chart(id,{
			title:{
				text: ""
			},
            animationEnabled: true,
			axisY:{
				reversed: true,
                labelFontSize: 10,
                interval: 2,
                minimum: 0,
                maximum: 9,
                gridColor: "#cccccc",
			},
            axisX:{
			    labelFontSize:140,
                labelFontColor: "#50519C",
            },
            backgroundColor: "white",
			data: [{
				type: "line",
				dataPoints: data,
                markerSize: 10,
                lineThickness: 2,
                color: "#FDA939",
			}],
		});
	    chart.render();
	}

	function drawDoughnutGraph(data, id) {
		var chart = new CanvasJS.Chart(id,{
			title:{
				text: ""
			},
            animationEnabled: true,
			axisY:{
				reversed: true,
                labelFontSize: 10,
                interval: 2,
                minimum: 0,
                maximum: 9,
			},
            axisX:{
			    labelFontSize:140,
                labelFontColor: "#50519C",
            },
            backgroundColor: "white",
			data: [{
				type: "doughnut",
				dataPoints: data,
                markerSize: 10,
                lineThickness: 2,
                color: "#FDA939",
			}]
		});
	    chart.render();
	}
</script>