{% load static %}
<div class="row">
    <div class="col-xs-12" style="padding-left: 0; padding-right: 3%;">
        <div class="recommend-title main-color x-large-font bold" align="center">
            {{ recommend.unit.get_unit_display }} - 문제와 영상
        </div>
    </div>
</div>
<div class="row recommend-sub-title" style="margin-top: 2%;">
    <div class="col-xs-9" align="left" style="padding-top: 50px; padding-left: 10%;">
        <div class="row x-large-font bold">
            추천 프로그램을 통한 강화학습
        </div>
        <div class="row medium-font">
            약한 부분을 강화하기 위하여 수능대왕이 문제집과 영상을 수집했습니다.
        </div>
    </div>
    <div class="col-xs-3" style="padding-top: 10px;">
        <img class="rocket-img" src="{% static 'assets/img/rocket.png' %}">
    </div>
</div>
{% for middleUnit in middleUnits %}
<div class="row" style="margin-top: 10%;">
    <div class="recommend-unit col-xs-12 large-font bold" align="left">
        {{ middleUnit.1 }}
    </div>
</div>
<div class="row" style="margin-top: 3%;">
    <div class="col-xs-6 lecture-div" style="padding-left: 3%;" data-middleunit="{{ middleUnit.0 }}">
        <div class="row medium-font gray-color bold" align="left">
            학습하기
        </div>
    </div>
    <div class="col-xs-6" align="left">
        <div class="row medium-font gray-color bold" align="left">
            연습문제
        </div>
        <div class="recommend-test-div" data-middleunit="{{ middleUnit.0 }}">

        </div>
    </div>
</div>
{% endfor %}
<script>
    var unit = 6;  // change to unit number
    $('.recommend-test').click(function () {
        $.ajax({
            url: "recommendTest/?unit="+unit,
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('#recommend-test-div').empty()
                $('#recommend-test-div').append(result)
                $('#recommend-test-div').css('display', 'inherit')
                $('#recommend-right-div').css('display', 'none')
            },
        });
    })

    $('.recommend-test-div').each(function () {
        var testDiv = this;
        $.ajax({
            url: "getSmallUnitTest/?middleUnit="+$(this).data('middleunit'),
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $(testDiv).append(result)
            },
        });
    })

    $('.lecture-div').each(function () {
        var lectureDiv = this;
        $.ajax({
            url: "getMiddleUnitLecture/?middleUnit="+$(this).data('middleunit'),
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $(lectureDiv).append(result)
            },
        });
    })

</script>