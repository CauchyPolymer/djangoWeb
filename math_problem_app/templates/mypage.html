{% load static %}
<div class="row">
    <div class="col-xs-3 left-menu" align="center">
        <p class="large-font underline">Daily_Ming</p>
        <div class="profile-circle"><span class="profile-char white-color">{{ user.name.0 }}</span></div>
        <p class="mypage-name x-large-font">{{ user.name }}</p>
        <p class="mypage-email small-font">{{ user.email }}</p>
        <p class="mypage-left-text medium-font">{{ user.school }} {{ user.grade }}학년</p>
    </div>
    <div class="col-xs-9">
        <div class="row main-bottom main-background-color" align="center">
            <p class="main-bottom-msg white-color"><span class="x-large-font bold">{{ user.name }}</span><span class="large-font">의 실력은?</span></p>
        </div>
        <div class="row" align="center" style="margin-top: 2%; padding: 0 5% 0 5%">
            <div class="col-xs-2 x-large-font main-color bold">수1</div>
            <div class="col-xs-2 x-large-font main-color bold">수2</div>
            <div class="col-xs-2 x-large-font main-color bold">미1</div>
            <div class="col-xs-2 x-large-font main-color bold">미2</div>
            <div class="col-xs-2 x-large-font main-color bold">기벡</div>
            <div class="col-xs-2 x-large-font main-color bold">확통</div>
        </div>
        <div class="row">
            <div id="chartContainer" style="height: 50%; width: 97%;"></div>
        </div>
        <div class="row" align="right" style="padding-right: 5%">
            <div class="col-xs3 bold large-font">updated: {{ user.rate.get_updated_at }}</div>
        </div>
        <div class="row main-bottom main-background-color mypage-bottom" align="center">
            <p class="main-bottom-msg white-color mypage-bottom-msg"><span id="test" class="x-large-font bold">진단고사 보기</span></p>
        </div>
    </div>
</div>
<script>
    $('#test').click(function () {
        $.ajax({
            url: "mypage2/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })

    $.ajax({
        url: "getRateData/",
        type: 'GET',
        contentType: "application/json; charset=utf-8",
        success: function (result) {
            drawGraph(result)
        },
    });

    function drawGraph(data) {
		var chart = new CanvasJS.Chart("chartContainer",{
			title:{
				text: ""
			},
            animationEnabled: true,
			axisY:{
				reversed: true,
                labelFontSize: 30,
                interval: 1,
                minimum: 0,
                maximum: 9,
			},
            axisX:{
			    labelFontSize: 40,
                labelFontColor: "#50519C",
            },
            backgroundColor: "#E5E7F5",
			data: [{
				type: "line",
				dataPoints: data,
                markerSize: 35,
                lineThickness: 6,
                color: "#47DFBA",
			}]
		});
	    chart.render();
	}

	$(".mypage-bottom-msg").mouseover(function(){
        $(this).css("color", "#20216C");
    });
    $(".mypage-bottom-msg").mouseleave(function(){
        $(this).css("color", "white");
    });

</script>