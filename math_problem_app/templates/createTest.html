{% load static %}
<div class="row" style="margin-top: 5px;">
    <div class="col-xs-3 lecture-left-menu" align="center" style="padding: 0">
        <div class="lecture-left-box x-large-font create-test-left-box">
            {{ user.name }}의 문제지
        </div>
        <div class="row lecture-left-box large-font test-box">
            <div class="col-xs-9">
                시험지 이름1
            </div>
            <div class="col-xs-3 test-complete">
                완료
            </div>
        </div>
    </div>
    <div class="col-xs-9">
        <div class="row">
            <div class="col-xs-4">
                <div class="row medium-font test-type-check-box">
                    <div class="col-xs-6">
                        내신형
                        <label class="container small-font" style="left: 50%; margin-top: -26px;">
                            <input id="naesin" type="checkbox" checked>
                            <span class="checkmark"></span>
                        </label>
                    </div>
                    <div class="col-xs-6">
                        수능형
                        <label class="container small-font" style="left: 50%; margin-top: -26px;">
                            <input id="suneung" type="checkbox" checked>
                            <span class="checkmark"></span>
                        </label>
                    </div>
                </div>
                <div class="row medium-font test-type-check-box">
                    <div class="col-xs-6">
                        개념확인형
                        <label class="container small-font" style="left: 70%; margin-top: -26px;">
                            <input id="gaenyumhwakin" type="checkbox" checked>
                            <span class="checkmark"></span>
                        </label>
                    </div>
                    <div class="col-xs-6">
                        개념응용형
                        <label class="container small-font" style="left: 70%; margin-top: -26px;">
                            <input id="gaenyumeungyong" type="checkbox" checked>
                            <span class="checkmark"></span>
                        </label>
                    </div>
                </div>
                <div class="row" style="margin-top: 5%;">
                    <div class="col-xs-4 medium-font" align="left">
                        쉬운
                    </div>
                    <div class="col-xs-4 medium-font" align="center">
                        중간
                    </div>
                    <div class="col-xs-4 medium-font" align="right">
                        어려운
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <input id='difficulty' type="range" step="1" min="1" max="3">
                    </div>
                </div>
            </div>
            <div class="col-xs-8" style="padding-left: 5%">
                <div class="row">
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        수1
                    </div>
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        수2
                    </div>
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        미적1
                    </div>
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        미적2
                    </div>
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        확통
                    </div>
                    <div class="col-xs-2 medium-font unit-box" align="center">
                        기벡
                    </div>
                </div>
                <div class="row" style="margin-top: 10%;">
                    <div class="col-xs-12" align="right">
                        <img id="board-search-icon" src="{% static 'assets/img/group-3@3x.png' %}">
                        <input id="board-search-btn" type="button" class="w3-btn medium-font board-left-btn main-background-color white-color test-btn" value="상세 검색">
                        <input id="board-search-btn" type="button" class="w3-btn medium-font board-left-btn main-background-color white-color test-btn" value="조건 초기화">
                    </div>
                </div>
            </div>
        </div>
        <div class="row problem-box-div">

        </div>
    </div>
</div>

<script>
    var idx = 0
    var size = 30
    var type = [1, 2, 3, 4]
    var difficulty = 2

    $('#difficulty').change(function(){
        difficulty = $('#difficulty').val()
        getProblems()
    })

    $('#naesin').change(function () {
        if($(this).is(":checked")){
            type.push(1)
        } else {
            var index = type.indexOf(1)
            if(index > -1)
                type.splice(index, 1)
        }
        getProblems()
    })

    $('#suneung').change(function () {
        if($(this).is(":checked")){
            type.push(2)
        } else {
            var index = type.indexOf(2)
            if(index > -1)
                type.splice(index, 1)
        }
        getProblems()
    })

    $('#gaenyumhwakin').change(function () {
        if($(this).is(":checked")){
            type.push(3)
        } else {
            var index = type.indexOf(3)
            if(index > -1)
                type.splice(index, 1)
        }
        getProblems()
    })

    $('#gaenyumeungyong').change(function () {
        if($(this).is(":checked")){
            type.push(4)
        } else {
            var index = type.indexOf(4)
            if(index > -1)
                type.splice(index, 1)
        }
        getProblems()
    })



    getProblems()

    function getProblems() {
        $.ajax({
            url: "problemBox/?idx="+idx+"&size="+size+"&type="+type.toString()+'&difficulty='+difficulty,
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.problem-box-div').empty()
                $('.problem-box-div').append(result)
            },
        });
    }

</script>