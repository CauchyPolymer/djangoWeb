{% load static %}
<div class="row">
    <div class="col-xs-6 main-left">
        <div class="main-color large-font main-text white-color">
            시키는 대로만해.<br>
            필요한 걸 알려줄게.<br>
            수학의 모든 것 <span class="x-large-font bold">수능대왕</span>
        </div>
        <input id="estimate" type="button" class="white-color large-font main-bottom-msg estimate main-background-color" value="실력 측정하기!">
    </div>
    <div class="col-xs-6" align="right" style="padding-left: 0">
        <iframe height="42%" width="100%" style="opacity: 0.5" src="https://www.youtube.com/embed/WUgvvPRH7Oc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
</div>


<div class="row">
    <div class="col-xs-offset-1 col-xs-10">
        <div class="w3-content w3-section" style="max-width:1000px">
          <img class="mySlides w3-animate-right" src="{% static 'assets/img/main-slide01.png' %}" style="width:100%">
          <img class="mySlides w3-animate-right" src="{% static 'assets/img/main-slide02.png' %}" style="width:100%">
          <img class="mySlides w3-animate-right" src="{% static 'assets/img/main-slide03.png' %}" style="width:100%">
        </div>
    </div>
</div>

<script>
    history.pushState(null, null, "#main");
    $(window).bind("hashchange", function(){
        history.pushState(null, null, "#main");
    });

    var myIndex = 0;
    carousel();

    function carousel() {
        var i;
        var x = document.getElementsByClassName("mySlides");
        for (i = 0; i < x.length; i++) {
          x[i].style.display = "none";
        }
        myIndex++;
        if (myIndex > x.length) {myIndex = 1}
        x[myIndex-1].style.display = "block";
        setTimeout(carousel, 5500);
    }

    $(".main-bottom-msg").mouseover(function(){
        $(this).css("color", "#20216C");
    });
    $(".main-bottom-msg").mouseleave(function(){
        $(this).css("color", "white");
    });

    $('#estimate').click(function () {
        $.ajax({
            url: "signIn/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })

    {% if user %}
    $('#login').text('로그아웃')
    $('#login').unbind('click')
    $('#login').click(function () {
        $.ajax({
            url: "logout/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                goToMain()
                alert(result.msg)
            },
        });
    })
    {% else %}
    $('#login').text('로그인')
    $('#login').unbind('click')
    $('#login').click(function () {
        $.ajax({
            url: "login/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })
    {% endif %}
</script>
