{% load static %}

<canvas id="c">
<div class="article_grid_1">
    <img id="gird_1_background" src="{% static 'admin/img/landing_img1.png'%}" alt="">
    <div class=top-left><h2>수학학원?</h2>칠판앞에 10명씩 앉아서 듣는 수업, 네 이름은 불러주지도 않는 선생님
                        <h2>거기는 너희 한명 한명에게</h2>
                        <h1>관심 없어!</h1>
                        </div>
    </div>
</div>
<div class="grid_mascot">
<img src="{% static 'admin/img/sndw_mascot.png'%}" alt="">
</div>

<div class="article_grid_2">
    <img id="grid_2_background" src="{% static 'admin/img/slide2.png'%} " alt="">
    <div class="cloud x3"></div>
</div>

<div style="text-align:center; font-size:200px; padding:30px;">
  <h1><bolder><i>지루하게 느껴지지 않아?</i></bolder></h1>
</div>

<div class="article_grid_7">
  <img id="grid_7_text" src="{%static 'admin/img/text7.png'%}" alt="">
  <img id="grid_7_background" src="{%static 'admin/img/rullet.png'%}" alt="">
</div>

<div class="article_grid_8">
  <img id="grid_8_text" src="{%static 'admin/img/text8.png'%}" alt="">
  <div class="cloud x1">
</div>

<div class="article_grid_10">
  <img id="grid_10_background" src="{%static 'admin/img/unclesndw.png'%}" alt="">
  <div class="cloud x2">
</div>

<div class="article_grid_11">
    <img id="grid_11_background" src="{%static 'admin/img/text10.png'%}" alt="">
</div>
</canvas>

<script>
var partNum = 111;
//particle number - change it!

window.requestAnimFrame = (function(){
    return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        function(callback){
            window.setTimeout(callback, 1000 / 60);
        };
})();

function between(min, max) {
  return Math.random() * (max - min) + min;
}

var c = document.getElementById('c');
var ctx = c.getContext('2d');
//context and id of canvas

var w = window.innerWidth;
var h = window.innerHeight;
//width and height of canvas

c.width = w;
c.height = h;
//setting the width and height for canvas

var mouse = {
  x: w / 2,
  y: h / 2
};
//mouse position

document.addEventListener('mousemove', function(e){
    mouse.x = e.clientX || e.pageX;
    mouse.y = e.clientY || e.pageY
}, false);
//finding the mouse position

var particles = [];
for(i = 0; i < partNum; i++) {
  particles.push(new particle);
}

//the particle function
function particle() {
  this.x = between(c.width / 2 - 85, c.width / 2 + 85);
  this.y = between(c.height / 2 - 85, c.height / 2 + 85);
  //setting the mouse position to the particle x and y


  this.vx = Math.random() * 8 - 4;
  this.vy = Math.random() * 8 - 4;
  //random velocity

  this.r = 1.5;
  //random radius

  this.color = '#fff';
  //only random colors of the variables
}

function draw() {
  requestAnimFrame(draw)

  ctx.fillStyle = '#343435';
  ctx.fillRect(0, 0, c.width, c.height)

  for(t = 0; t < particles.length; t++) {
    var p = particles[t];

    ctx.beginPath();
    ctx.fillStyle = p.color;
    ctx.arc(p.x, p.y, p.r, Math.PI * 2, false);
    ctx.fill();
    //the context of the particle(s)

    p.x+=p.vx;
    p.y+=p.vy;
    //setting velocities

    p.vx;
    p.vy;

    if(p.y < 0) {
      p.vy *= -1;
    }

    if(p.y > c.height) {
      p.vy *= -1;
    }

    if(p.x < 0) {
      p.vx *= -1;
    }

    if(p.x > c.width) {
      p.vx *= -1;
    }

    for(j = 0; j < particles.length; j++) {
			var pp = particles[j];
			distance(p, pp);
    }
  }
}

function distance(p1, p2) {
	var dist,
		dx = p1.x - p2.x,
		dy = p1.y - p2.y;

	dist = Math.sqrt(dx*dx + dy*dy);

	// Draw the line when distance is smaller
	// then the minimum distance
  var minDist = 33;

	if(dist <= minDist) {

		// Draw the line
		ctx.beginPath();
		ctx.strokeStyle = "rgba(255,255,255,"+ (1.2-dist/minDist) +")";
		ctx.moveTo(p1.x, p1.y);
		ctx.lineTo(p2.x, p2.y);
		ctx.stroke();
		ctx.closePath();


		var ax = dx/1000,
			ay = dy/1000;
    // Some acceleration for the partcles
		// depending upon their distance

		p1.vx -= ax;
		p1.vy -= ay;

		p2.vx += ax;
		p2.vy += ay;
		// Apply the acceleration on the particles

     p1.r = 3;
		p2.r = 3;

     if(p1.r > 7) {
       p1.r = 7;
     }
     if(p2.r > 7) {
       p2.r = 7;
     }

	} else {
     p1.r = 1.5;
		p2.r = 1.5;
  }
}

draw();


  jQuery(document).ready(function(){
    $('h1').mousemove(function(e){
       var rXP = (e.pageX - this.offsetLeft-$(this).width()/2);
       var rYP = (e.pageY - this.offsetTop-$(this).height()/2);
    $('h1').css('text-shadow', +rYP/10+'px '+rXP/80+'px rgba(227,6,19,.8), '+rYP/8+'px '+rXP/60+'px rgba(255,237,0,1), '+rXP/70+'px '+rYP/12+'px rgba(0,159,227,.7)');
        });
          });

    history.pushState(null, null, "#main");
    $(window).bind("hashchange", function(){
        history.pushState(null, null, "#main");
    });

    $(".main-bottom-msg").mouseover(function(){
        $(this).css("color", "#20216C");
    });
    $(".main-bottom-msg").mouseleave(function(){
        $(this).css("color", "white");
    });

    $('#estimate').click(function () {
        $.ajax({
            url: "estimationStart/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })

    {% if user %}
    $('#login').text('로그아웃')
    $('#login').unbind('click')
    $('#signup').css('display', 'none')
    $('#login').removeClass('border-right')
    $('#login').click(function () {
        $.ajax({
            url: "logout/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                goToMain()
                alert(result.msg)
                $('#login').addClass('border-right')
                $('#signup').css('display', 'inherit')
            },
        });
    })
    {% else %}
    $('#login').text('로그인')
    $('#login').unbind('click')
    $('#login').click(function () {
        $.ajax({
            url: "login/",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            success: function (result) {
                $('.main-container').empty()
                $('.main-container').append(result)
            },
        });
    })
    {% endif %}
</script>
